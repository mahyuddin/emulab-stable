<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>HyperViewer in Emulab</title>
</head>
<body>
<h2>Using HyperViewer in Emulab</h2>
<h3>Table of Contents:</h3>
<ol>
  <li><a href="#intro">Introduction</a></li>
  <li><a href="#install">Installing hypview</a></li>
  <li><a href="#run">Running hypview as a script</a></li>
  <li><a href="#gui">The hypview Graphical User Interface</a><br>
  </li>
</ol>
<h3><a name="intro"></a>Introduction</h3>
This is a client program which runs on your computer, and shows a 3D
view of the
network
topologies for Emulab experiments.&nbsp; In detail, we have wrapped the
HyperViewer in a wxGlade Python graphical user
interface, and connected it to the Emulab database via XML-RPC over SSH.<br>
<br>
The <a href="http://graphics.stanford.edu/papers/h3cga/">HyperViewer</a>
software was developed by <a
 href="http://graphics.stanford.edu/%7Emunzner">Tamara Munzner at
Stanford</a>.&nbsp; It is
useful for
visualizing relationships within large graphs such as network
topologies, and is freely distributed as a <a
 href="http://graphics.stanford.edu/%7Emunzner/software.html">C++ class
library</a> which calls OpenGL for drawing.&nbsp; See her short <a
 href="http://graphics.stanford.edu/papers/h3cga/html/">paper</a> for
further description, particularly <a
 href="http://graphics.stanford.edu/papers/h3cga/html/cga.html#hypmotionfig">Figure
3</a> which shows Hyperbolic motion over a 30,000 element
Unix file system.<br>
&nbsp;<a
 href="http://graphics.stanford.edu/papers/h3cga/html/cga.html#hypmotionfig"><img
 style="border: 2px solid ; width: 149px; height: 150px;"
 alt="Hyperbolic Motion - Figure 3" title="Hyperbolic Motion - Figure 3"
 src="image1.jpg"></a><br>
<br>
The basic idea is that a graph is presented within a sphere that
resembles a fish-eye lens: objects in the center of the sphere appear
full-size, but objects get smaller as they approach the surface of the
sphere.&nbsp; A hyperbolic projection is used, which actually maps an
infinite 3D space onto the finite sphere.&nbsp; M.C. Esher did likewise
in 2D with <a href="http://mathworld.wolfram.com/HyperbolicTiling.html">hyperbolic
tilings</a>.<br>
<a href="http://www.mcescher.com/Gallery/recogn-bmp/LW436.jpg"><img
 style="border: 2px solid ; width: 106px; height: 106px;" alt=""
 title="Click for full-size image" src="LW436-thumb.jpg"></a><br>
<h3><a name="install"></a>Installing hypview</h3>
Getting and unpacking the binary tarball:<br>
<ul>
  <li>Note: There are .so compatibility problems with .so shared
libraries used by wxPython, which we are working on.&nbsp; Meanwhile,
as this is Very Alpha Software now, your best bet is to jump to the
next section on building from sources.<br>
  </li>
  <li>The binary tarball is in
~fish/flux/testbed/hyperviewer/hyperviewer.tgz on BAS for
now.</li>
  <li>There is a top-level hyperviewer directory in the tarball, so
just unpack with:<br>
  </li>
</ul>
<div style="margin-left: 80px;">
<pre><big>tar xvzf ~fish/flux/testbed/hyperviewer/hyperviewer.tgz<br><br></big></pre>
</div>
Building from sources - This avoids shared library compatibility
problems, but requires that you have wxPython and its dependencies
installed on your machine first.<br>
<ul>
  <li>To build the hypviewer C++ library and the _hv.so that is loaded
into Python:</li>
</ul>
<pre style="margin-left: 80px;"><big>cd testbed/hyperviewer<br>gmake -f GNUMakefile</big></pre>
<ul>
  <li>See
the ROADMAP file if you want to know more about internals.</li>
</ul>
There are a couple of example files included:
<ul>
</ul>
<div style="margin-left: 80px;">
<pre><big>cd testbed/hyperviewer<br>./hypview.py BigLan.hyp</big><big><br>./hypview.py ts600.hyp</big>
</pre>
</div>
Supported platforms:<br>
<ul>
  <li>FreeBSD - The first target.<br>
  </li>
  <ul>
    <li>There is a bug in the Radeon DRI driver which "tatters" bitmap
text.</li>
    <li>There are different problems in the nVidia drivers.</li>
    <li>Turning off hardware acceleration of OpenGL rendering is ugly
but works.</li>
  </ul>
</ul>
<ul>
  <li>Linux - Pretty much untested.</li>
  <ul>
    <li>Edit the GNUMakefile to select CPU=linux before building,</li>
    <li>and also select the include of Makefile.linuxglut in
hypviewer/Makefile.main .<br>
    </li>
  </ul>
  <li>Windows - Coming soon.</li>
  <li>Please send problem reports to <a href="mailto:fish@cs.utah.edu">Russ
Fish</a>.<br>
  </li>
</ul>
Package dependencies: <br>
<div style="margin-left: 40px;">It needs wxPython, gtk, glX,
OpenGL...; and wxGlade on top if you want to modify the GUI.<br>
</div>
<h3><a name="run"></a>Running hypview as a script<br>
</h3>
Running hypview with any dash argument such as -h produces the
following usage
summary:<br>
<pre style="margin-left: 40px;"><big>Hyperviewer usage:</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp; No args - Starts up the GUI.&nbsp; Use the File/Open menu item to read a topology.</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp; One arg - A .hyp file name.&nbsp; Read it in and start the GUI, e.g.:</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./hypview.py BigLan.hyp</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp; Two args - Project and experiment names in the database.</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Get the topology from XMLRPC, make a .hyp file, start as above.</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./hypview.py testbed BigLan</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp; Three args - Project and experiment names, plus an optional root node name.</big></pre>
<pre style="margin-left: 40px;"><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ./hypview.py testbed BigLan clan</big></pre>
<h3><a name="gui"></a>The hypview Graphical User Interface</h3>
Getting out: pick the File/Exit menu item, or type Ctrl-Q, or close the
window.<br>
<br>
Here's an example of the appearance of hypview once it is running:<br>
<ul style="margin-left: 120px;">
  <li>Note: Text labels on the nodes may show only
partially on your display if you have an ATI Radeon card, due to a bug
in the DRI driver for OpenGL.</li>
  <li>Note: the window comes up split down the middle now.&nbsp; Drag
the
divider to the right so it looks like the picture below.&nbsp; Also,
resizing the window mis-aligns the OpenGL picking, so don't do that
yet...</li>
</ul>
<div style="margin-left: 40px;"><a href="gui_top.jpg"><img
 src="gui_top_small.jpg" title="Click for full-size image." alt=""
 style="border: 2px solid ; width: 380px; height: 326px;"></a><br>
</div>
<br>
The pane on the left contains the HyperViewer.&nbsp; The pane on the
right is the control panel.<br>
<br>
<ul style="margin-left: 40px;">
  <li>Pressing the "Help" button, or selecting Help/Usage from the menu
at
the top of the window, or typing Ctrl-H, pops up a window describing
the HyperViewer mouse controls which apply to the left pane:</li>
</ul>
<div style="margin-left: 80px;"><img src="mouse_usage.jpg" alt=""
 style="width: 354px; height: 261px;"></div>
<div style="margin-left: 40px;"><br>
<ul>
  <li>One way to navigate is to drag the view.&nbsp; Here is a picture
just like the one above, but dragged to the left a bit with the left
mouse button.&nbsp; Notice how the mid-level branching is more
visible.&nbsp; <br>
  </li>
  <li>You can walk through the graph this way, dragging from top-level
details to lower levels.&nbsp; The right mouse button rotates what is
behind to the front so you can better see it.</li>
</ul>
<div style="margin-left: 40px;"><a href="gui_top2.jpg"><img align="top"
 style="border: 2px solid ; width: 380px; height: 326px;" alt=""
 src="gui_top_small2.jpg" title="Click for full-size image."></a></div>
<ul>
  <li>As you move the mouse over the boxes representing nodes (hosts or
lans), they turn bright green.&nbsp; Clicking on a bright green box
selects it to move to the center of the sphere.&nbsp; Its bright yellow
color denotes its selected status.&nbsp; So you can walk through a tree
that way as well.</li>
</ul>
<div style="margin-left: 40px;"><a href="gui_top3.jpg"><img align="top"
 style="border: 2px solid ; width: 380px; height: 326px;" alt=""
 src="gui_top_small3.jpg" title="Click for full-size image."></a><br>
</div>
<br>
The control panel at the right is divided into two sections.&nbsp; The
one on the top gives information about the last-selected node, and the
one in the middle controls modes of HyperViewer.<br>
<br>
The node controls include:<br>
<ul>
  <li>A "go to top" button to re-center the root node,</li>
  <li>The name of the last-selected node,</li>
  <li>The count of children in the spanning tree,</li>
  <li>And for inbound and outbound graph links that are not part of the
spanning tree,</li>
  <ul>
    <li>The count of the Non-tree links connecting to the node,</li>
    <li>"show" and "hide" buttons to make the links visible or
invisible, <br>
    </li>
    <li>A "descend" check-box which determines whether showing or
hiding apply just to the selected node, or to the sub-tree under the
node.<br>
    </li>
  </ul>
</ul>
<div style="margin-left: 40px;"><img
 style="width: 215px; height: 235px;" alt="" src="gui_node.jpg"><br>
</div>
<br>
These controls are used to explore networks with many
cross-links.&nbsp; The cross-links are not visible at first.&nbsp; Here
is an example (ts600.hyp) where the links are then turned on by
clicking either of the "show" buttons for the whole tree (descending
from the root):<br>
<br>
<a href="ts600_hide.jpg"><img
 style="border: 2px solid ; width: 380px; height: 326px;" alt=""
 src="ts600_hide_small.jpg" title="Click for full-size image."></a><a
 href="ts600_show.jpg"><img
 style="border: 2px solid ; width: 380px; height: 326px;" alt=""
 src="ts600_show_small.jpg" title="Click for full-size image."></a><br>
<div style="margin-left: 40px;"><br>
</div>
<br>
The mode controls are still changing.&nbsp; There are a lot of modes in
HyperViewer to control the drawing and layout of graphs.&nbsp; (There
are no layout controls visible yet.)<br>
<ul>
  <li>Draw {sphere,nodes,links} - Turn off to cut down on clutter.</li>
  <li>Keep aspect - Whether to keep the sphere round as the window is
resized.&nbsp; (Not working yet.)<br>
  </li>
  <li>Label to right - Changes the positioning of the text labels.</li>
  <li>Labels: Long, Short, None - How much of the label strings are
shown.</li>
  <li>{Node,Link} depth - Allows showing only a few levels down from
the selected node in very cluttered graphs.</li>
  <li>Animation frames - Controls how many steps are taken to animate
the change of view when a node is picked as the new center.&nbsp; (Not
working yet.)<br>
  </li>
</ul>
<div style="margin-left: 40px;"><img
 style="width: 211px; height: 275px;" alt="" src="gui_modes.jpg"><br>
</div>
<br>
</div>
There is one more dialog panel which pops up when you select the
File/Open menu item, or type Ctrl-O.&nbsp; You can read a .hyp file, or
load an experiment from the database via XML-RPC.<br>
<ul>
  <li>There is no browser option yet.&nbsp; Ya just gotta type or
cut-and-paste.&nbsp; (This is Alpha software!)</li>
  <li>For experiments, the optional root node is the host or lan from
which the tree layout starts.&nbsp; If you know it, put it in.&nbsp;
Otherwise the first lan in the database links list is chosen, or the
first host if there are no lans.</li>
  <li>Since HyperViewer is set up to load a file, the experiment option
actually writes a temp .hyp file.&nbsp; You will see the file name on
the window title if you want to save the file.<br>
  </li>
</ul>
<div style="margin-left: 40px;"><img
 style="width: 416px; height: 327px;" alt="" src="open_dialog.jpg"><br>
</div>
<br>
</body>
</html>
