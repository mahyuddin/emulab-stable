tb_prerun("tbprerun",0);
# Check DB state.
@result = (
["link2","0.00","100000","0.025","node4:2"],
["link2","0.00","100000","0.025","node5:1"],
["link3","0.00","100000","0.000","node6:0"],
["link3","0.00","100000","0.000","node5:2"],
["lan2","25.00","100000","0.000","node4:0"],
["lan2","25.00","100000","0.000","node3:1"],
["link4","500.00","45000","0.000","node6:1"],
["link4","500.00","45000","0.000","node1:1"],
["lan3","50.00","100000","0.000","node1:0"],
["lan3","50.00","100000","0.000","node2:0"],
["lan3","50.00","100000","0.000","node3:0"],
["link1","0.00","100000","0.000","node4:1"],
["link1","0.00","100000","0.000","node5:0"],
);
tb_compare("SELECT vname,delay,bandwidth,lossrate,member from virt_lans" .
    " where pid=\"testbed\" and eid=\"test\"",
    \@result);
@result = (
["0:192.168.5.2 1:192.168.4.3","node1","pc"],
["0:192.168.5.3","node2","pc"],
["0:192.168.5.4 1:192.168.3.3","node3","pc"],
["0:192.168.3.2 1:192.168.6.2 2:192.168.1.2","node4","pc"],
["0:192.168.6.3 1:192.168.1.3 2:192.168.2.3","node5","pc"],
["0:192.168.2.2 1:192.168.4.2","node6","pc"],
);
tb_compare("SELECT ips,vname,type from virt_nodes" .
    " where pid=\"testbed\" and eid=\"test\"",
    \@result);
tb_run("tbswapin",0);
tb_run("tbswapout",0);
tb_run("tbswapin",0);
tb_run("tbswapout",0);
tb_run("tbend",0);
