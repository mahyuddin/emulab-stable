#!/usr/local/bin/python
# -*- python -*-

import sys
sys.path.append("@prefix@/lib")
import getopt
import libplab

def usage(me):
    print "Usage: %s [ -vd ] { getfree [-i] | renew }" % me
    sys.exit(1)

def main(args):
    me = args[0]
    try:
        args = libplab.handleArgs(args[1:])
        if not len(args):
            usage(me)
        command = args[0]

        plab = libplab.Plab()
        if command == "getfree":
            opts, args = getopt.getopt(args[1:], "i")
            ignorenew = False
            for o, a in opts:
                if o == "-i":
                    ignorenew = True
            if len(args):
                usage(me)
            plab.getFree(ignorenew)
        elif command == "renew":
            plab.renew()
        else:
            usage(ms)
    except getopt.GetoptError:
        usage(me)

if __name__ == "__main__":
    main(sys.argv)
