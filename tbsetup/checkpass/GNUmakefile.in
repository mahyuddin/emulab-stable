SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ../..
SUBDIR		= tbsetup/checkpass

include $(OBJDIR)/Makeconf

all: checkpass

#
# XXX This code needs to be "imported" in the accepted manner. This
# is for vpath.
#
SRCDIR	+= $(TESTBED_SRCDIR)/$(SUBDIR)/cracklib,2.7/cracklib
OBJECTS  = cracklib,2.7/cracklib/fascist.o cracklib,2.7/cracklib/packlib.o cracklib,2.7/cracklib/rules.o cracklib,2.7/cracklib/stringlib.o
CFLAGS  += -I$(TESTBED_SRCDIR)/$(SUBDIR)/cracklib,2.7/cracklib -DIN_CRACKLIB

include $(TESTBED_SRCDIR)/GNUmakerules

checkpass: checkpass.o $(OBJECTS)
	${CC} -g -o checkpass checkpass.o $(OBJECTS) -lm

cracklib:
	gmake -C cracklib,2.7 all

install:	$(INSTALL_LIBEXECDIR)/checkpass

clean:
#	gmake -C cracklib,2.7 clean
	/bin/rm -f *.o checkpass

