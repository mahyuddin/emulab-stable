4/10/06

Experiences creating a FreeBSD 5.x based "newnode" MFS from the existing
5.3 based "admin" MFS.

Stuff gleaned from a diff:

1. "at" changed in /etc/crontab to run every minute instead of every 5.
   Needed?  No.

2. The current MFS uses a more exotic hack to DHCP on all interfaces.
   The newnode MFS had a one-off hack, we will switch to the more general
   hack.

3. Old MFS mounts /proc in /etc/fstab.  Not needed.

4. Old MFS has localhost.emulab.net hardwired in /etc/hosts.


Needed:

1. Change root password to newnode value.
2. Remove /etc/jail
3. Change root authorized keys

Additional items from an email that Rob sent:

* Commented out the call to rc.testbed in /etc/rc.local
* Edited /etc/rc.local to call new client

We no longer use /etc/rc.local in FreeBSD 5, so you will need to change
/usr/local/etc/rc.d/testbed.sh in the obvious way (and remove the elvind.sh
while you are in that directory).

* Installed the 'newclient' script (from testbed/install/) into
  /etc/testbed
* Installed 'teachswitch' (from testbed/tools/teachswitch/) into
  /etc/testbed

Put these in /usr/local/etc/rc.d instead.  Make sure newclient is executable.
teachswitch will have to be compiled.  It is best you do this on the same
OS that it will be running on to avoid shared library problems (or statically
link it).


