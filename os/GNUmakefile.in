#
# Insert Copyright Here.
#
SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ..
SUBDIR		= os

include $(OBJDIR)/Makeconf

SUBDIRS	= imagezip frisbee.redux growdisk

all:	$(SUBDIRS) split-image.sh

include $(TESTBED_SRCDIR)/GNUmakerules

imagezip:
	@$(MAKE) -C imagezip all

frisbee.redux:
	@$(MAKE) -C frisbee.redux all

install: $(INSTALL_SBINDIR)/split-image.sh
	@$(MAKE) -C imagezip install
	@$(MAKE) -C frisbee.redux install

control-install: 
	@$(MAKE) -C imagezip install

client-install: 
	$(INSTALL_PROGRAM) create-delta /usr/local/bin/create-delta
	$(INSTALL_PROGRAM) install-delta /usr/local/bin/install-delta
	$(INSTALL_PROGRAM) install-tarfile /usr/local/bin/install-tarfile
	$(INSTALL_PROGRAM) create-image /usr/local/bin/create-image

clean:		subdir-clean

subdir-clean:
	@$(MAKE) -C imagezip clean
	@$(MAKE) -C frisbee.redux clean

distclean:	subdir-distclean

subdir-distclean:
	@$(MAKE) -C imagezip distclean

.PHONY:	$(SUBDIRS)

