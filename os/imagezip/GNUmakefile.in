#
# EMULAB-COPYRIGHT
# Copyright (c) 2000-2002 University of Utah and the Flux Group.
# All rights reserved.
#

SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ../..
SUBDIR		= os/imagezip

include $(OBJDIR)/Makeconf

all:	imagezip imageunzip frisbee.o

include $(TESTBED_SRCDIR)/GNUmakerules

CFLAGS = -O2 -g -static
LIBS   = -lz

imagezip: imagezip.o
	$(CC) $(CFLAGS) imagezip.o $(LIBS) -o imagezip

imageunzip: imageunzip.o 
	$(CC) $(CFLAGS) imageunzip.o $(LIBS) -o imageunzip

frisbee.o:	imageunzip.c
	$(CC) -c $(CFLAGS) -DFRISBEE -o frisbee.o $<

install: $(INSTALL_BINDIR)/imagezip $(INSTALL_BINDIR)/imageunzip

client-install: 
	$(INSTALL_PROGRAM) imagezip /usr/local/bin/imagezip
	$(INSTALL_PROGRAM) imageunzip /usr/local/bin/imageunzip

clean:
	/bin/rm -f *.o imagezip imageunzip
