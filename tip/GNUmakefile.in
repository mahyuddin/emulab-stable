SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ..
SUBDIR		= tip

include $(OBJDIR)/Makeconf

#
# Do not build tip in general build. All this kludgery is to make sure
# that if we build on paper but install it on plastic, tip will get
# built over there and not here. 3.4 vs 4.1 problems. Big Sigh. 
# 
all:
	@echo "TIP cannot be built or installed on the ops node"

include $(TESTBED_SRCDIR)/GNUmakerules

CC = gcc -g -O2

OBJS = cmds.o cmdtab.o hunt.o partab.o \
       remote.o tip.o value.o vars.o getcap.o

#
# If HAVE_UUCPLOCK is defined you need -lutil for BSD
#
LIBS=

tip: $(OBJS)
	$(CC) -o tip $(OBJS) $(LIBS)

tip.static: $(OBJS)
	$(CC) -static -o tip.static $(OBJS) $(LIBS)

$(OBJS): tipconf.h tip.h

install:
	@echo "TIP cannot be built or installed on the ops node"

#
# Control node installation (okay, plastic)
#
control-install:	tip.static
	-mkdir -p $(INSTALL_BINDIR)
	$(INSTALL_PROGRAM) tip.static $(INSTALL_BINDIR)/tip

clean:
	rm -f $(OBJS) tip tip.static
