#
# EMULAB-COPYRIGHT
# Copyright (c) 2000-2005 University of Utah and the Flux Group.
# All rights reserved.
#

SRCDIR		= @srcdir@
TESTBED_SRCDIR	= @top_srcdir@
OBJDIR		= ../../..
SUBDIR		= event/linktest/iperf

include $(OBJDIR)/Makeconf

all:	src/emulab-iperf

include $(TESTBED_SRCDIR)/GNUmakerules

# Next two rules for linux, where make=gmake.
%-am:		force
	make $(MAKEFLAGS) -f Makefile $@

%-recursive:	force
	make $(MAKEFLAGS) -f Makefile $@

src/emulab-iperf:	iperf-2.0.2 config.status build-iperf

build-iperf:
	make $(MAKEFLAGS) -f Makefile all

client-install:
	make $(MAKEFLAGS) -f Makefile install

config.status:
	$(SRCDIR)/iperf-2.0.2/configure

iperf-2.0.2:
	$(SRCDIR)/iperf-fetch.sh $(SRCDIR)

clean:
	make $(MAKEFLAGS) -f Makefile clean

force: ;
