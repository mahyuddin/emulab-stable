#!/bin/bash

linux="pc7 pc137 pc406 pc207 pc607"
bsd="pc446 pc208 pc4 pc133 pc603"
machines="${linux} ${bsd}"

utils="diskcheck diskspeedcheck memcheck cpucheck getfromtb.sh timecheck niccheck"

for i in $machines
do
    echo "$i rc.config "
    sudo rsync -a rc/rc.config ${i}:/usr/local/etc/emulab/rc/rc.config
#    sudo ssh ${i} chown root /usr/local/etc/emulab/rc/rc.config
#    sudo ssh ${i} chgrp 0 /usr/local/etc/emulab/rc/rc.config
done

for i in $linux
do
    echo -n "$i:rc.nodecheck-linux "
    sudo scp -p rc/rc.nodecheck_perl ${i}:/usr/local/etc/emulab/rc/rc.nodecheck
#    sudo ssh ${i} chown root /usr/local/etc/emulab/rc/rc.nodecheck
#    sudo ssh ${i} chgrp root /usr/local/etc/emulab/rc/rc.nodecheck
done

for i in $bsd
do
    echo -n "$i:rc.nodecheck-bsd "
    sudo scp -p rc/rc.nodecheck_sh ${i}:/usr/local/etc/emulab/rc/rc.nodecheck
#    sudo ssh ${i} chown root /usr/local/etc/emulab/rc/rc.nodecheck
#    sudo ssh ${i} chgrp wheel /usr/local/etc/emulab/rc/rc.nodecheck
done


for i in $machines
do
    echo "${i}:utils "
    sudo rsync -a ${utils} ${i}:/usr/local/etc/emulab
 #   sudo ssh ${i} "cd /usr/local/etc/emulab ; chown root ${utils} "
 #   sudo ssh ${i} "cd /usr/local/etc/emulab ; chgrp 0 ${utils} "

done

